!function(i){i(document).ready(function(i){function n(i){var n=i.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return n&&4===n.length?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):i}function t(){i(".sio--wrap").fadeIn(g)}function o(){i(".sio--loader").fadeOut(g)}var e=i(".sio--preview-icons"),s=i(".sio--sort-icons"),a=i('.sio--switch input[type="checkbox"]'),c=0,r=i("#alignment"),l=i("#background"),d=i("#custom-background"),u=i("#shape"),p=i("#size"),h=i("#spacing"),f=i("#sio-colour-picker"),v=i(".sio--spectrum"),m="",g=400,b="Oops. It looks like you have not activated any accounts yet.";setTimeout(function(){c=i(".sio--icon-editable")},400),function(){var n=i(".sio--tabs"),t=n.find("li"),o=i(".sio--tab-content");t.on("click",function(){var n=i(this).attr("data-tab");t.removeClass("current"),o.removeClass("current"),i(this).addClass("current"),i("#"+n).addClass("current")});var e=window.location.hash,s=i("#tab-1"),a=i("#tab-2"),c=i("#tab-3");t.removeClass("current"),o.removeClass("current"),"#accounts"==e?(n.find('[data-tab="tab-1"]').addClass("current"),s.addClass("current")):"#customise"==e?(n.find('[data-tab="tab-2"]').addClass("current"),a.addClass("current")):"#display"==e?(n.find('[data-tab="tab-3"]').addClass("current"),c.addClass("current")):(n.find('[data-tab="tab-1"]').addClass("current"),s.addClass("current"))}(),function(){function n(){var n=i(this).parent().next().find("input");if(i(this).attr("id"),i(this).is(":checked")){n.prop("disabled",!1).prop("required",!0),n.parent().removeClass("disabled"),n.parents("td").prev().find(".sio--heading-icon").removeClass("disabled");var t=2*n.val().length;n.focus(),n[0].setSelectionRange(t,t)}else n.prop("disabled",!0).prop("required",!1),n.parent().addClass("disabled"),n.parents("td").prev().find(".sio--heading-icon").addClass("disabled")}i.each(a,n),a.on("change",n)}(),function(){d.val().length<=0&&v.length>0?(m=v.find(".sp-preview-inner").css("background-color"),m=n(m)):m=d.val()}(),function(){f.spectrum({color:m,flat:!1,showInput:!0,className:"sio--spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",localStorageKey:"sio.colour.picker",containerClassName:"sio--colour-picker",hideAfterPaletteSelect:!0,showButtons:!1,move:function(n){if(i(".sio--icon-bg-custom").length>0){var t=f.spectrum("get");t=t.toHexString(),i.each(c,function(){i(this).css("background-color",""+t)}),d.val(t)}},change:function(n){if(i(".sio--icon-bg-custom").length>0){var t=f.spectrum("get");t=t.toHexString(),i.each(c,function(){i(this).css("background-color",""+t)}),d.val(t)}}})}(),function(){function n(){k=r.find("option:selected").val(),y=l.find("option:selected").val(),S=u.find("option:selected").val(),w=p.find("option:selected").val(),x=h.find("option:selected").val(),e.empty(),i.each(a,function(){if(i(this).is(":checked")){var n=i(this).attr("id");e.addClass("sio--icon-align-"+k),e.append('<li class="sio--icon-spacing-'+x+'"><span class="sio--icon sio--icon-editable sio--icon-'+n+" sio--icon-bg-"+y+" sio--icon-shape-"+S+" sio--icon-size-"+w+'"></span></li>'),"custom"==y&&i(".sio--icon-editable").css("background-color",m)}}),e.is(":empty")&&e.append('<li class="sio--empty">'+b+"</li>")}function t(){var i=r.val();e.removeClass(function(i,n){return(n.match(/(^|\s)sio--icon-align-\S+/g)||[]).join(" ")}),e.addClass("sio--icon-align-"+i)}function o(){var n=l.val();c=i(".sio--icon-editable"),i.each(c,function(){i(this).hasClass("sio--icon-bg-custom")&&i(this).removeAttr("style"),i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio--icon-bg-\S+/g)||[]).join(" ")}),i(this).addClass("sio--icon-bg-"+n)}),"custom"!=n?i(".sio--spectrum").hide():i(".sio--spectrum").show()}function s(){var n=u.val();c=i(".sio--icon-editable"),i.each(c,function(){i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio--icon-shape-\S+/g)||[]).join(" ")}),i(this).addClass("sio--icon-shape-"+n)})}function f(){var n=p.val();c=i(".sio--icon-editable"),i.each(c,function(){i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio--icon-size-\S+/g)||[]).join(" ")}),i(this).addClass("sio--icon-size-"+n)})}function g(){var n=h.val();c=i(".sio--icon-editable"),i.each(c,function(){i(this).parent().removeClass(function(i,n){return(n.match(/(^|\s)sio--icon-spacing-\S+/g)||[]).join(" ")}),i(this).parent().addClass("sio--icon-spacing-"+n)})}function C(){var n=l.val();c=i(".sio--icon-editable"),"custom"===n?(v.show(),i.each(c,function(){i(this).css("background-color",m)}),d.val().length<=0&&d.val(m)):"custom"!=n&&v.hide()}var k=r.find("option:selected").val(),y=l.find("option:selected").val(),S=u.find("option:selected").val(),w=p.find("option:selected").val(),x=h.find("option:selected").val();n(),t(),o(),s(),f(),g(),C(),a.on("change",function(){n()}),r.on("change",function(){t()}),l.on("change",function(){o(),C()}),u.on("change",function(){s()}),p.on("change",function(){f()}),h.on("change",function(){g()})}(),function(){var n=i(".form-table").find('input[type="hidden"]');n.length>0&&i.each(n,function(){var n=i(this).parents("form");i(this).parents("tr").attr("class","remove-row"),i(this).appendTo(n),i(".remove-row").remove()})}(),function(){function n(i,n){return i=i.index,n=n.index,i-n}function t(){var t=[];c=l.val(),r=u.val(),d=p.val(),e.is(":empty")||(s.empty(),s.append('<li class="sio--empty">'+b+"</li>")),i.each(o,function(){var n=i(this).attr("id").replace("_pos",""),o=i(this).val();i("input#"+n+'[type="checkbox"]').is(":checked")?(s.find(i(".sio--empty").remove()),i(this).val()||i(this).val(1),i(this).prop("disabled",!1),t.push({name:n,index:o})):(i(this).val(""),i(this).prop("disabled",!0),i(this).parents("tr").hide())}),t.sort(n);for(var a=0;a<t.length;a++){var f=t[a].name,v='<li id="sort-icon-'+f+'"><span class="sio--icon sio--icon-editable sio--icon-'+f+" sio--icon-shape-"+r+" sio--icon-size-"+d+" sio--icon-bg-"+c+'"'+h+'"></span></li>';s.append(v)}}var o=i("input.sio--pos-input"),c=l.val(),r=u.val(),d=p.val(),h="";"custom"==c&&(h=' style="background-color: '+m+'"'),t(),s.sortable({stop:function(n){i.each(i(".ui-sortable-handle"),function(){var n=i(this).attr("id"),t=i(this).index()+1;n=n.replace("sort-icon-",""),i("input#"+n+"_pos").val(t)})}}),a.on("change",function(){t()})}(),setTimeout(function(){o()},200),setTimeout(function(){t()},400)})}(jQuery);