"use strict";!function(i){i(document).ready(function(i){function n(i){var n=i.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return n&&4===n.length?"#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2):i}function t(){i(".sio-wrap").fadeIn(m)}var e,o=i(".sio-preview__icons"),s=i(".sio-sort__icons"),a=i('.sio-switch input[type="checkbox"]'),c=i("#alignment"),r=i("#background"),l=i("#custom-background"),d=i("#shape"),u=i("#size"),p=i("#spacing"),h=i("#sio-colour-picker"),v=i(".sio-spectrum"),f="",m=400,g="Oops. It looks like you have not activated any accounts yet.";setTimeout(function(){e=i(".sio-icon-editable")},400),function(){var n=i(".sio-tabs"),t=n.find("li"),e=i(".sio-tab-content");t.on("click",function(){var n=i(this).attr("data-tab");t.removeClass("current"),e.removeClass("current"),i(this).addClass("current"),i("#"+n).addClass("current")});var o=window.location.hash,s=i("#tab-1"),a=i("#tab-2"),c=i("#tab-3");t.removeClass("current"),e.removeClass("current"),"#accounts"===o?(n.find('[data-tab="tab-1"]').addClass("current"),s.addClass("current")):"#customise"===o?(n.find('[data-tab="tab-2"]').addClass("current"),a.addClass("current")):"#display"===o?(n.find('[data-tab="tab-3"]').addClass("current"),c.addClass("current")):(n.find('[data-tab="tab-1"]').addClass("current"),s.addClass("current"))}(),function(){function n(){var n=i(this).parent().next().find("input");if(i(this).attr("id"),i(this).is(":checked")){n.prop("disabled",!1).prop("required",!0),n.parent().removeClass("disabled"),n.parents("td").prev().find(".sio-heading-icon").removeClass("disabled");var t=2*n.val().length;n.focus(),n[0].setSelectionRange(t,t)}else n.prop("disabled",!0).prop("required",!1),n.parent().addClass("disabled"),n.parents("td").prev().find(".sio-heading-icon").addClass("disabled")}i.each(a,n),a.on("change",n)}(),function(){l.val().length<=0&&v.length>0?(f=v.find(".sp-preview-inner").css("background-color"),f=n(f)):f=l.val()}(),function(){h.spectrum({color:f,flat:!1,showInput:!0,className:"sio-spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",localStorageKey:"sio.colour.picker",containerClassName:"sio-colour-picker",hideAfterPaletteSelect:!0,showButtons:!1,move:function(n){if(i(".sio-icon--custom").length>0){var t=h.spectrum("get");t=t.toHexString(),i.each(e,function(){i(this).css("background-color",""+t)}),l.val(t)}},change:function(n){if(i(".sio-icon--custom").length>0){var t=h.spectrum("get");t=t.toHexString(),i.each(e,function(){i(this).css("background-color",""+t)}),l.val(t)}}})}(),function(){function n(){k=c.find("option:selected").val(),y=r.find("option:selected").val(),w=d.find("option:selected").val(),S=u.find("option:selected").val(),_=p.find("option:selected").val(),o.empty(),i.each(a,function(){if(i(this).is(":checked")){var n=i(this).attr("id");o.addClass("sio-preview__icons--"+k),o.append('<li class="sio-icon--'+_+'"><span class="sio-icon sio-icon-editable sio-icon--'+n+" sio-icon--"+y+" sio-icon--"+w+" sio-icon--"+S+'"></span></li>'),"custom"===y&&i(".sio-icon-editable").css("background-color",f)}}),o.is(":empty")&&o.append('<li class="sio-empty">'+g+"</li>")}function t(){var i=c.val();o.removeClass(function(i,n){return(n.match(/(^|\s)sio-preview__icons--\S+/g)||[]).join(" ")}),o.addClass("sio-preview__icons--"+i)}function s(){var n=r.val();e=i(".sio-icon-editable"),i.each(e,function(){i(this).hasClass("sio-icon--custom")&&i(this).removeAttr("style"),i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio-icon--bg-\S+/g)||[]).join(" ")}),i(this).addClass("sio-icon--bg-"+n)}),"custom"!==n?i(".sio-spectrum").hide():i(".sio-spectrum").show()}function h(){var n=d.val();e=i(".sio-icon-editable"),i.each(e,function(){i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio-icon--shape-\S+/g)||[]).join(" ")}),i(this).addClass("sio-icon--shape-"+n)})}function m(){var n=u.val();e=i(".sio-icon-editable"),i.each(e,function(){i(this).removeClass(function(i,n){return(n.match(/(^|\s)sio-icon--size-\S+/g)||[]).join(" ")}),i(this).addClass("sio-icon--size-"+n)})}function b(){var n=p.val();e=i(".sio-icon-editable"),i.each(e,function(){i(this).parent().removeClass(function(i,n){return(n.match(/(^|\s)sio-icon--space-\S+/g)||[]).join(" ")}),i(this).parent().addClass("sio-icon--space-"+n)})}function C(){var n=r.val();e=i(".sio-icon-editable"),"custom"===n?(v.show(),i.each(e,function(){i(this).css("background-color",f)}),l.val().length<=0&&l.val(f)):"custom"!==n&&v.hide()}var k=c.find("option:selected").val(),y=r.find("option:selected").val(),w=d.find("option:selected").val(),S=u.find("option:selected").val(),_=p.find("option:selected").val();n(),t(),s(),h(),m(),b(),C(),a.on("change",function(){n()}),c.on("change",function(){t()}),r.on("change",function(){s(),C()}),d.on("change",function(){h()}),u.on("change",function(){m()}),p.on("change",function(){b()})}(),function(){var n=i(".form-table").find('input[type="hidden"]');n.length>0&&i.each(n,function(){var n=i(this).parents("form");i(this).parents("tr").attr("class","remove-row"),i(this).appendTo(n),i(".remove-row").remove()})}(),function(){function n(i,n){return i=i.index,n=n.index,i-n}function t(){var t=[];c=r.val(),l=d.val(),p=u.val(),o.is(":empty")||(s.empty(),s.append('<li class="sio-empty">'+g+"</li>")),i.each(e,function(){var n=i(this).attr("id").replace("_pos",""),e=i(this).val();i("input#"+n+'[type="checkbox"]').is(":checked")?(s.find(i(".sio-empty").remove()),i(this).val()||i(this).val(1),i(this).prop("disabled",!1),t.push({name:n,index:e})):(i(this).val(""),i(this).prop("disabled",!0),i(this).parents("tr").hide())}),t.sort(n);for(var a=0;a<t.length;a++){var v=t[a].name,f='<li id="sort-icon-'+v+'"><span class="sio-icon sio-icon-editable sio-icon--'+v+" sio-icon--shape-"+l+" sio-icon--size-"+p+" sio-icon--bg-"+c+'"'+h+'"></span></li>';s.append(f)}}var e=i("input.sio-pos-input"),c=r.val(),l=d.val(),p=u.val(),h="";"custom"===c&&(h=' style="background-color: '+f+'"'),t(),s.sortable({stop:function(n){i.each(i(".ui-sortable-handle"),function(){var n=i(this).attr("id"),t=i(this).index()+1;n=n.replace("sort-icon-",""),i("input#"+n+"_pos").val(t)})}}),a.on("change",function(){t()})}(),setTimeout(function(){t()},400)})}(jQuery);